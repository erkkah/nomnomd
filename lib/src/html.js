"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.unzoomScript = exports.reloadScript = exports.wrapContent = void 0;
var pupa_1 = __importDefault(require("pupa"));
function wrapContent(content, options) {
    var _a, _b, _c, _d, _e, _f;
    var footer = "Generated by nomnomd";
    return pupa_1.default(template, {
        content: content,
        title: (_a = options === null || options === void 0 ? void 0 : options.title) !== null && _a !== void 0 ? _a : "",
        header: (_b = options === null || options === void 0 ? void 0 : options.header) !== null && _b !== void 0 ? _b : "",
        footer: (_c = options === null || options === void 0 ? void 0 : options.footer) !== null && _c !== void 0 ? _c : footer,
        style: style,
        themeCSS: (_d = options === null || options === void 0 ? void 0 : options.themeCSS) !== null && _d !== void 0 ? _d : "",
        codeTheme: (_e = options === null || options === void 0 ? void 0 : options.codeTheme) !== null && _e !== void 0 ? _e : "agate",
        script: (_f = options === null || options === void 0 ? void 0 : options.script) !== null && _f !== void 0 ? _f : "",
    });
}
exports.wrapContent = wrapContent;
var html = String.raw;
var template = html(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n    <!DOCTYPE html>\n    <html>\n        <head>\n            <meta charset=\"utf-8\" />\n            <meta\n                name=\"viewport\"\n                content=\"width=device-width,initial-scale=1\"\n            />\n            <link\n                rel=\"stylesheet\"\n                href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/{codeTheme}.min.css\"\n            />\n            <style>\n                {themeCSS}\n                {style}\n            </style>\n            <title>{title}</title>\n        </head>\n\n        <body>\n            <div class=\"page\">\n                <div class=\"center\">\n                    <header>\n                        <span>{header}</span>\n                    </header>\n                    <div id=\"content\">{content}</div>\n                    <footer>\n                        <span>{footer}</span>\n                    </footer>\n                </div>\n            </div>\n            <script>{script}</script>\n        </body>\n    </html>\n"], ["\n    <!DOCTYPE html>\n    <html>\n        <head>\n            <meta charset=\"utf-8\" />\n            <meta\n                name=\"viewport\"\n                content=\"width=device-width,initial-scale=1\"\n            />\n            <link\n                rel=\"stylesheet\"\n                href=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/{codeTheme}.min.css\"\n            />\n            <style>\n                {themeCSS}\n                {style}\n            </style>\n            <title>{title}</title>\n        </head>\n\n        <body>\n            <div class=\"page\">\n                <div class=\"center\">\n                    <header>\n                        <span>{header}</span>\n                    </header>\n                    <div id=\"content\">{content}</div>\n                    <footer>\n                        <span>{footer}</span>\n                    </footer>\n                </div>\n            </div>\n            <script>{script}</script>\n        </body>\n    </html>\n"])));
var css = String.raw;
var style = css(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n    :root {\n        /* Max width of centered content */\n        --maxwidth: 1280px;\n\n        /*\n         * HSL - based calculated palette\n         */\n        --h0: var(--startH);\n        --h1: calc(var(--h0) + var(--stepH));\n        --h2: calc(var(--h1) + var(--stepH));\n        --h3: calc(var(--h2) + var(--stepH));\n\n        --s0: var(--startS);\n        --s1: calc(var(--s0) * var(--scaleS));\n        --s2: calc(var(--s1) * var(--scaleS));\n        --s3: calc(var(--s2) * var(--scaleS));\n\n        --l0: var(--startL);\n        --l1: calc(var(--l0) * var(--scaleL));\n        --l2: calc(var(--l1) * var(--scaleL));\n        --l3: calc(var(--l2) * var(--scaleL));\n\n        --cc0: hsl(var(--h0), var(--s0), var(--l0));\n        --cc1: hsl(var(--h1), var(--s1), var(--l1));\n        --cc2: hsl(var(--h2), var(--s2), var(--l2));\n        --cc3: hsl(var(--h3), var(--s3), var(--l3));\n\n        /*\n         * Four-color palette from dark to light, or the other way around.\n         */\n        --c0: var(--color0, var(--cc0, #111111));\n        --c1: var(--color1, var(--cc1, #888888));\n        --c2: var(--color2, var(--cc2, #aaaaaa));\n        --c3: var(--color3, var(--cc3, #eeeeee));\n    \n        /* Fonts. Use browser fonts by default */\n        --variable: var(--variable-font, sans-serif);\n        --fixed: var(--fixed-font, monospace);\n        --headline: var(--headline-font, var(--variable));\n\n        /* Divider style: size + dotted, dashed, solid or none */\n        --dividers: var(--divider-style, 1px solid);\n\n        /* Heading decoration style: dotted, et.c. */\n        --heading-style: var(--heading-decoration, none);\n    }\n\n    body {\n        margin: 0;\n        font-family: var(--variable);\n        font-size: 1em;\n    }\n\n    /* The whole page */\n    .page {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-around;\n        align-content: stretch;\n        background-color: var(--c0);\n        min-height: 100vh;\n    }\n\n    /* Horizontally centered content */\n    .center {\n        display: flex;\n        flex-direction: column;\n        max-width: var(--maxwidth);\n        flex-grow: 1;\n        padding: 8px;\n        background-color: var(--c1);\n        justify-content: stretch;\n    }\n\n    /* Page parts: header, content, section, footer */\n\n    header {\n        padding: 0 8px 8px 8px;\n        border-bottom: 2px solid var(--c0);\n        text-align: left;\n        color: var(--c3);\n    }\n\n    #content {\n        flex-grow: 1;\n    }\n\n    section {\n        display: flex;\n        flex-direction: column;\n        margin-top: 8px;\n        margin-left: 8px;\n        padding-bottom: 8px;\n        border-bottom: var(--dividers) var(--c2);\n        color: var(--c3);\n        max-width: calc(100vw - 40px);\n    }\n\n    footer {\n        font-size: smaller;\n        text-align: center;\n        color: var(--c3);\n    }\n\n    /* Common elements */\n\n    a {\n        text-decoration: none;\n        border-bottom: 0.5px solid var(--c2);\n        color: var(--c3);\n        word-wrap: break-word;\n    }\n\n    a[href^=\"#\"].target {\n        pointer-events: none;\n        cursor: text;\n        filter: grayscale(1);\n        border-bottom-width: 2px;\n    }\n\n    header a {\n        border: none;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5 {\n        border-bottom: var(--heading-style) var(--c3);\n        align-self: flex-start;\n        flex-grow: 0;\n        flex-shrink: 1;\n        margin: 16px 0 6px 0;\n    }\n\n    h1 + p,\n    h2 + p,\n    h3 + p,\n    h4 + p,\n    h5 + p {\n        margin-top: 4px;\n    }\n\n    p {\n        margin-top: 8px;\n        margin-bottom: 4px;\n    }\n\n    ol,\n    ul {\n        margin: 4px 0;\n    }\n\n    ol ol,\n    ol ul,\n    ul ul,\n    ul ol {\n        margin: 0;\n    }\n\n    li {\n        line-height: 1.5;\n    }\n\n    hr {\n        border: none;\n        border-top: 1px solid var(--c0);\n        color: var(--c0);\n        text-align: center;\n        height: 4px;\n        margin: 1ch 0;\n    }\n\n    pre {\n        margin-top: 4px;\n        margin-bottom: 4px;\n    }\n\n    code {\n        font-family: var(--fixed);\n        /* Slight reduction to compensate for the perceived enlargement of fixed vs variable fonts */\n        font-size: 0.98em;\n    }\n\n    pre code {\n        padding: 4px 2px;\n        margin: 8px 0;\n        display: block;\n        overflow: scroll;\n        scrollbar-width: none;\n        scroll-padding: 0;\n    }\n\n    code::-webkit-scrollbar {\n        display: none;\n    }\n\n    blockquote {\n        border-left: var(--dividers) var(--c0);\n        padding-left: 0.5em;\n    }\n\n    table {\n        --border: solid 1px var(--c0);\n        border: var(--border);\n        border-spacing: 0;\n    }\n\n    th,\n    td {\n        padding: 0 2px 0 4px;\n        margin: 0;\n    }\n\n    tr {\n        margin: 0;\n        padding: 0;\n    }\n\n    tr:nth-child(even) {\n        background-color: var(--c2);\n        color: var(--c0);\n        filter: hue-rotate(-12deg) contrast(0.8);\n    }\n\n    th {\n        border-bottom: var(--border);\n        background-color: var(--c2);\n        color: var(--c0);\n    }\n\n    td,\n    th {\n        border-right: var(--border);\n    }\n\n    td:nth-last-child(1),\n    th:nth-last-child(1) {\n        border-right: none;\n    }\n\n    /* img styling */\n    img, svg {\n        max-width: 100%;\n        height: auto;\n        border: dotted var(--c0) 0.2px;\n    }\n\n    input[type=\"checkbox\"].toggle {\n        display: none;\n        z-index: 1;\n    }\n\n    .lbl-toggle {\n        display: inline-block;\n        cursor: pointer;\n        position: relative;\n        top: 0.5em;\n        left: 1ex;\n        z-index: 1;\n    }\n\n    .lbl-toggle:before {\n        content: \"\uD83D\uDD0D\";\n        filter: opacity(0.1);\n        transition: filter 0.2s ease-in;\n    }\n\n    .lbl-toggle:hover:before {\n        filter: opacity(1);\n    }\n\n    .toggle:checked + .lbl-toggle:before {\n        content: \"\u2715\";\n        filter: opacity(1);\n    }\n\n    .toggle:checked + .lbl-toggle {\n        z-index: 4;\n        position: fixed;\n        top: 10px;\n        left: 10px;\n        width: 2ex;\n        height: 2ex;\n        border: 2px solid black;\n        background: white;\n        text-align: center;\n        padding: 2px;\n        font-size: xx-large;\n    }\n\n    .toggle:checked + .lbl-toggle + .zoomable {\n        z-index: 2;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(255, 255, 255, 0.3);\n        backdrop-filter: blur(5px);\n    }\n\n    .zoomable {\n        position: relative;\n        top: -1.5em;\n        display: block;\n        transition: backdrop-filter 0.3s ease-out;\n    }\n\n    .zoomable > svg {\n        transition: width 0.1s ease-in;\n        max-height: 90vh;\n    }\n\n    .toggle:checked + .lbl-toggle + .zoomable > svg {\n        z-index: 3;\n        width: 90vw;\n        position: fixed;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        background-color: var(--c1);\n        border: 2px solid var(--c0);\n    }\n    \n"], ["\n    :root {\n        /* Max width of centered content */\n        --maxwidth: 1280px;\n\n        /*\n         * HSL - based calculated palette\n         */\n        --h0: var(--startH);\n        --h1: calc(var(--h0) + var(--stepH));\n        --h2: calc(var(--h1) + var(--stepH));\n        --h3: calc(var(--h2) + var(--stepH));\n\n        --s0: var(--startS);\n        --s1: calc(var(--s0) * var(--scaleS));\n        --s2: calc(var(--s1) * var(--scaleS));\n        --s3: calc(var(--s2) * var(--scaleS));\n\n        --l0: var(--startL);\n        --l1: calc(var(--l0) * var(--scaleL));\n        --l2: calc(var(--l1) * var(--scaleL));\n        --l3: calc(var(--l2) * var(--scaleL));\n\n        --cc0: hsl(var(--h0), var(--s0), var(--l0));\n        --cc1: hsl(var(--h1), var(--s1), var(--l1));\n        --cc2: hsl(var(--h2), var(--s2), var(--l2));\n        --cc3: hsl(var(--h3), var(--s3), var(--l3));\n\n        /*\n         * Four-color palette from dark to light, or the other way around.\n         */\n        --c0: var(--color0, var(--cc0, #111111));\n        --c1: var(--color1, var(--cc1, #888888));\n        --c2: var(--color2, var(--cc2, #aaaaaa));\n        --c3: var(--color3, var(--cc3, #eeeeee));\n    \n        /* Fonts. Use browser fonts by default */\n        --variable: var(--variable-font, sans-serif);\n        --fixed: var(--fixed-font, monospace);\n        --headline: var(--headline-font, var(--variable));\n\n        /* Divider style: size + dotted, dashed, solid or none */\n        --dividers: var(--divider-style, 1px solid);\n\n        /* Heading decoration style: dotted, et.c. */\n        --heading-style: var(--heading-decoration, none);\n    }\n\n    body {\n        margin: 0;\n        font-family: var(--variable);\n        font-size: 1em;\n    }\n\n    /* The whole page */\n    .page {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-around;\n        align-content: stretch;\n        background-color: var(--c0);\n        min-height: 100vh;\n    }\n\n    /* Horizontally centered content */\n    .center {\n        display: flex;\n        flex-direction: column;\n        max-width: var(--maxwidth);\n        flex-grow: 1;\n        padding: 8px;\n        background-color: var(--c1);\n        justify-content: stretch;\n    }\n\n    /* Page parts: header, content, section, footer */\n\n    header {\n        padding: 0 8px 8px 8px;\n        border-bottom: 2px solid var(--c0);\n        text-align: left;\n        color: var(--c3);\n    }\n\n    #content {\n        flex-grow: 1;\n    }\n\n    section {\n        display: flex;\n        flex-direction: column;\n        margin-top: 8px;\n        margin-left: 8px;\n        padding-bottom: 8px;\n        border-bottom: var(--dividers) var(--c2);\n        color: var(--c3);\n        max-width: calc(100vw - 40px);\n    }\n\n    footer {\n        font-size: smaller;\n        text-align: center;\n        color: var(--c3);\n    }\n\n    /* Common elements */\n\n    a {\n        text-decoration: none;\n        border-bottom: 0.5px solid var(--c2);\n        color: var(--c3);\n        word-wrap: break-word;\n    }\n\n    a[href^=\"#\"].target {\n        pointer-events: none;\n        cursor: text;\n        filter: grayscale(1);\n        border-bottom-width: 2px;\n    }\n\n    header a {\n        border: none;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5 {\n        border-bottom: var(--heading-style) var(--c3);\n        align-self: flex-start;\n        flex-grow: 0;\n        flex-shrink: 1;\n        margin: 16px 0 6px 0;\n    }\n\n    h1 + p,\n    h2 + p,\n    h3 + p,\n    h4 + p,\n    h5 + p {\n        margin-top: 4px;\n    }\n\n    p {\n        margin-top: 8px;\n        margin-bottom: 4px;\n    }\n\n    ol,\n    ul {\n        margin: 4px 0;\n    }\n\n    ol ol,\n    ol ul,\n    ul ul,\n    ul ol {\n        margin: 0;\n    }\n\n    li {\n        line-height: 1.5;\n    }\n\n    hr {\n        border: none;\n        border-top: 1px solid var(--c0);\n        color: var(--c0);\n        text-align: center;\n        height: 4px;\n        margin: 1ch 0;\n    }\n\n    pre {\n        margin-top: 4px;\n        margin-bottom: 4px;\n    }\n\n    code {\n        font-family: var(--fixed);\n        /* Slight reduction to compensate for the perceived enlargement of fixed vs variable fonts */\n        font-size: 0.98em;\n    }\n\n    pre code {\n        padding: 4px 2px;\n        margin: 8px 0;\n        display: block;\n        overflow: scroll;\n        scrollbar-width: none;\n        scroll-padding: 0;\n    }\n\n    code::-webkit-scrollbar {\n        display: none;\n    }\n\n    blockquote {\n        border-left: var(--dividers) var(--c0);\n        padding-left: 0.5em;\n    }\n\n    table {\n        --border: solid 1px var(--c0);\n        border: var(--border);\n        border-spacing: 0;\n    }\n\n    th,\n    td {\n        padding: 0 2px 0 4px;\n        margin: 0;\n    }\n\n    tr {\n        margin: 0;\n        padding: 0;\n    }\n\n    tr:nth-child(even) {\n        background-color: var(--c2);\n        color: var(--c0);\n        filter: hue-rotate(-12deg) contrast(0.8);\n    }\n\n    th {\n        border-bottom: var(--border);\n        background-color: var(--c2);\n        color: var(--c0);\n    }\n\n    td,\n    th {\n        border-right: var(--border);\n    }\n\n    td:nth-last-child(1),\n    th:nth-last-child(1) {\n        border-right: none;\n    }\n\n    /* img styling */\n    img, svg {\n        max-width: 100%;\n        height: auto;\n        border: dotted var(--c0) 0.2px;\n    }\n\n    input[type=\"checkbox\"].toggle {\n        display: none;\n        z-index: 1;\n    }\n\n    .lbl-toggle {\n        display: inline-block;\n        cursor: pointer;\n        position: relative;\n        top: 0.5em;\n        left: 1ex;\n        z-index: 1;\n    }\n\n    .lbl-toggle:before {\n        content: \"\uD83D\uDD0D\";\n        filter: opacity(0.1);\n        transition: filter 0.2s ease-in;\n    }\n\n    .lbl-toggle:hover:before {\n        filter: opacity(1);\n    }\n\n    .toggle:checked + .lbl-toggle:before {\n        content: \"\u2715\";\n        filter: opacity(1);\n    }\n\n    .toggle:checked + .lbl-toggle {\n        z-index: 4;\n        position: fixed;\n        top: 10px;\n        left: 10px;\n        width: 2ex;\n        height: 2ex;\n        border: 2px solid black;\n        background: white;\n        text-align: center;\n        padding: 2px;\n        font-size: xx-large;\n    }\n\n    .toggle:checked + .lbl-toggle + .zoomable {\n        z-index: 2;\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(255, 255, 255, 0.3);\n        backdrop-filter: blur(5px);\n    }\n\n    .zoomable {\n        position: relative;\n        top: -1.5em;\n        display: block;\n        transition: backdrop-filter 0.3s ease-out;\n    }\n\n    .zoomable > svg {\n        transition: width 0.1s ease-in;\n        max-height: 90vh;\n    }\n\n    .toggle:checked + .lbl-toggle + .zoomable > svg {\n        z-index: 3;\n        width: 90vw;\n        position: fixed;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        background-color: var(--c1);\n        border: 2px solid var(--c0);\n    }\n    \n"])));
exports.reloadScript = (function reloader() {
    var lastUpdated = 0;
    function checkLastUpdated() {
        var req = new XMLHttpRequest();
        req.addEventListener("load", function () {
            var response = JSON.parse(req.response);
            var updated = response.updated || lastUpdated;
            if (lastUpdated > 0 && updated > lastUpdated) {
                location.reload();
            }
            else {
                lastUpdated = updated;
                setTimeout(checkLastUpdated, 1000);
            }
        });
        req.open("GET", document.URL + "?lastUpdated");
        req.send();
    }
    setTimeout(checkLastUpdated, 1000);
}).toString() + ";reloader();";
exports.unzoomScript = (function registerUnzoomHandler() {
    document.addEventListener("keydown", function (event) {
        if (event.code === "Escape") {
            var inputs = document.getElementsByTagName("input");
            for (var i in inputs) {
                var input = inputs[i];
                if (input.type == "checkbox") {
                    input.checked = false;
                }
            }
        }
    });
}).toString() + ";registerUnzoomHandler();";
var templateObject_1, templateObject_2;
//# sourceMappingURL=html.js.map